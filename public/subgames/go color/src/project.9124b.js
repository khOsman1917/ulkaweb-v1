require=function a(i,c,s){function l(e,t){if(!c[e]){if(!i[e]){var o="function"==typeof require&&require;if(!t&&o)return o(e,!0);if(u)return u(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var r=c[e]={exports:{}};i[e][0].call(r.exports,function(t){return l(i[e][1][t]||t)},r,r.exports,a,i,c,s)}return c[e].exports}for(var u="function"==typeof require&&require,t=0;t<s.length;t++)l(s[t]);return l}({Bullet:[function(t,e,o){"use strict";cc._RF.push(e,"688347Yq0NA+IIEbMFPhr7j","Bullet"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./Gun"),r=cc._decorator,a=r.ccclass,i=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.speed=0,t.lookAtPoint=cc.Vec2.ZERO,t}return __extends(t,e),t.prototype.start=function(){var t=(this.node.rotation-90)*(Math.PI/180);this.lookAtPoint.x=Math.cos(-t),this.lookAtPoint.y=Math.sin(-t),this.lookAtPoint.x*=n.default.instance.bulletSpeed,this.lookAtPoint.y*=n.default.instance.bulletSpeed},t.prototype.onCollisionEnter=function(t){3==t.tag&&this.node.destroy()},t.prototype.update=function(t){this.node.x+=this.lookAtPoint.x*t,this.node.y+=this.lookAtPoint.y*t},t=__decorate([a],t)}(cc.Component));o.default=i,cc._RF.pop()},{"./Gun":"Gun"}],Gun:[function(t,e,o){"use strict";cc._RF.push(e,"554b1aAQk5OgrKl6AtgNzo4","Gun"),Object.defineProperty(o,"__esModule",{value:!0});var r=t("./Player"),a=t("./UIManager"),n=cc._decorator,i=n.ccclass,c=n.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bulletPrefab=null,t.bulletParent=null,t.bulletSpeed=200,t.objective=null,t.projectingAngle=35,t.minAngle=0,t.maxAngle=0,t.shouldFire=!0,t.lastRandomNumber=0,t.angleList={400:80,450:72,500:63,550:58,600:53,650:48,700:45,750:44},t.angle=-1,t.timeStamp=0,t}var o;return __extends(t,e),(o=t).prototype.onLoad=function(){o.instance=this},t.prototype.spawnObjectives=function(){for(var t=null,e=cc.degreesToRadians(20),o=r.default.instance.node.children[0].position.mag()+1,n=e;cc.radiansToDegrees(n)<360;n+=e)(t=cc.instantiate(this.objective)).parent=this.bulletParent,t.x=Math.sin(n)*o,t.y=Math.cos(n)*o,t.rotation=this.LookAt(t.position.sub(this.node.position)),t.color=cc.hexToColor(a.default.instance.colors[this.randomRangeInt(0,a.default.instance.colors.length)]);this.bulletSpeed<750&&(this.bulletSpeed+=50),this.projectingAngle=this.angleList[this.bulletSpeed],this.minAngle=this.projectingAngle-25,this.maxAngle=this.projectingAngle+20},t.prototype.fire=function(){var t=cc.instantiate(this.bulletPrefab);t.parent=this.bulletParent,t.children[0].runAction(cc.scaleTo(.2,1,1.3)),t.rotation=r.default.instance.node.rotation+this.randomRangeFloat(this.minAngle,this.maxAngle)*this.angle,this.node.rotation=t.rotation},t.prototype.uncommonRandomNumer=function(t){var e=this.randomRangeInt(0,t);return e==this.lastRandomNumber&&(0==e?e++:e==t-1?e--:e++),this.lastRandomNumber=e},t.prototype.randomRangeInt=function(t,e){return Math.floor(this.randomRangeFloat(t,e))},t.prototype.randomRangeFloat=function(t,e){return Math.random()*(e-t)+t},t.prototype.LookAt=function(t){var e=Math.atan2(t.x,t.y);return cc.radiansToDegrees(e)},t.prototype.update=function(t){a.default.instance.isPlaying&&this.shouldFire&&(0<this.timeStamp?this.timeStamp-=t:(this.timeStamp=.3,this.fire()))},t.instance=null,__decorate([c(cc.Prefab)],t.prototype,"bulletPrefab",void 0),__decorate([c(cc.Node)],t.prototype,"bulletParent",void 0),__decorate([c(Number)],t.prototype,"bulletSpeed",void 0),__decorate([c(cc.Prefab)],t.prototype,"objective",void 0),t=o=__decorate([i],t)}(cc.Component);o.default=s,cc._RF.pop()},{"./Player":"Player","./UIManager":"UIManager"}],Player:[function(t,e,o){"use strict";cc._RF.push(e,"eabd9VfNwlIbK/6NgSdLKF0","Player"),Object.defineProperty(o,"__esModule",{value:!0});var r=t("./Gun"),a=t("./UIManager"),i=t("./objective"),n=cc._decorator,c=n.ccclass,s=n.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rotateSpeed=100,t.head=null,t.trail=null,t.objectiveCount=0,t.shouldRotate=!0,t.lastRot=0,t}var o;return __extends(t,e),(o=t).prototype.onLoad=function(){o.instance=this,cc.director.getCollisionManager().enabled=!0},t.prototype.init=function(){this.unregisterTouchEvent(),this.registerTouchEvent(),this.objectiveCount=0,this.rotateSpeed*=-1,this.head.x=this.rotateSpeed<0?-Math.abs(this.head.x):Math.abs(this.head.x),this.trail.x=this.rotateSpeed<0?Math.abs(this.head.x):-Math.abs(this.head.x),r.default.instance.angle*=-1,r.default.instance.shouldFire=!0,this.shouldRotate=!0,this.node.getComponent(cc.BoxCollider).enabled=!0},t.prototype.registerTouchEvent=function(){cc.Canvas.instance.node.on("touchstart",this.onMouseDown,this)},t.prototype.unregisterTouchEvent=function(){cc.Canvas.instance.node.off("touchstart",this.onMouseDown,this)},t.prototype.onMouseDown=function(){this.rotateSpeed*=-1,this.head.x=this.rotateSpeed<0?-Math.abs(this.head.x):Math.abs(this.head.x),this.trail.x=this.rotateSpeed<0?Math.abs(this.head.x):-Math.abs(this.head.x),r.default.instance.angle*=-1},t.prototype.onCollisionEnter=function(t){var n=this;if(1==t.tag)t.enabled=!1,t.getComponent(i.default).onDeath(),a.default.instance.addScore(),this.objectiveCount++,18==this.objectiveCount&&(this.node.getComponent(cc.BoxCollider).enabled=!1,a.default.instance.splash.color=cc.Color.WHITE,a.default.instance.splash.runAction(cc.fadeIn(.3)),setTimeout(function(){n.node.rotation=0,n.shouldRotate=!1,n.lastRot=0,a.default.instance.assignRandomColor(),r.default.instance.shouldFire=!1;for(var t=0,e=r.default.instance.bulletParent.children,o=e.length;t<o;t++)e[t].destroy();a.default.instance.colorCircle.progress=0,r.default.instance.spawnObjectives(),a.default.instance.splash.runAction(cc.fadeOut(.3)),setTimeout(function(){n.init()},100)},300));else if(2==t.tag){a.default.instance.isPlaying=!1;var e=cc.instantiate(a.default.instance.burst);e.parent=this.node,e.position=this.node.children[1].position,this.node.getComponent(cc.BoxCollider).enabled=!1,this.node.children[2].active=this.head.active=this.trail.active=!1,a.default.instance.splash.color=cc.Color.RED,a.default.instance.splash.runAction(cc.fadeTo(.3,150)),setTimeout(function(){a.default.instance.splash.runAction(cc.fadeOut(.3)),setTimeout(function(){a.default.instance.onDead()},1800)},300)}},t.prototype.update=function(t){if(a.default.instance.isPlaying&&this.shouldRotate){this.node.rotation+=this.rotateSpeed*t;var e=Math.abs(this.node.rotation),o=e-360*Math.floor(e/360);a.default.instance.colorCircle.progress=o/360,a.default.instance.colorCircle.node.children[0].scaleY=this.node.rotation<0?1:-1}},t.instance=null,__decorate([s(Number)],t.prototype,"rotateSpeed",void 0),__decorate([s(cc.Node)],t.prototype,"head",void 0),__decorate([s(cc.Node)],t.prototype,"trail",void 0),t=o=__decorate([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{"./Gun":"Gun","./UIManager":"UIManager","./objective":"objective"}],UIManager:[function(t,e,o){"use strict";cc._RF.push(e,"e74b5IrJhtHXp+PQunFbtLY","UIManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./Gun"),r=t("./Player"),a=cc._decorator,i=a.ccclass,c=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.homeScreen=null,t.retryScreen=null,t.splash=null,t.burstParent=null,t.burst=null,t.colors=["04fbfd","e706ef","ef0619","cef609","cef609","ef8506","009cf5"],t.PlayerColors=["04fbfd","FFFFFF","009cf5"],t.colorCircle=null,t.circle=null,t.objectiveColor=cc.Color.WHITE,t.scoreLabel=null,t.score=0,t.isPlaying=!1,t}var o;return __extends(t,e),(o=t).prototype.onLoad=function(){o.instance=this},t.prototype.start=function(){window.g&&window.g.isRetry&&this.play()},t.prototype.addScore=function(){this.score++,this.scoreLabel.string=this.score.toString()},t.prototype.play=function(){this.assignRandomColor(),n.default.instance.spawnObjectives(),this.isPlaying=!0,this.homeScreen.active=!1,r.default.instance.init()},t.prototype.assignRandomColor=function(){var t=n.default.instance.randomRangeInt(0,this.PlayerColors.length);r.default.instance.node.children[1].color=cc.hexToColor(this.PlayerColors[t]),r.default.instance.node.children[2].color=cc.hexToColor(this.PlayerColors[t]),r.default.instance.trail.getComponent(cc.ParticleSystem).startColor=cc.hexToColor(this.PlayerColors[t]),this.colorCircle.node.children[0].color=cc.hexToColor(this.PlayerColors[t])},t.prototype.onDead=function(){this.retryScreen.active=!0,this.isPlaying=!1,r.default.instance.unregisterTouchEvent()},t.prototype.retry=function(){this.retryScreen.active=!1,window.g={},window.g.isRetry=!0,cc.director.loadScene("gamePlay")},t.instance=null,__decorate([c(cc.Node)],t.prototype,"homeScreen",void 0),__decorate([c(cc.Node)],t.prototype,"retryScreen",void 0),__decorate([c(cc.Node)],t.prototype,"splash",void 0),__decorate([c(cc.Node)],t.prototype,"burstParent",void 0),__decorate([c(cc.Prefab)],t.prototype,"burst",void 0),__decorate([c(cc.ProgressBar)],t.prototype,"colorCircle",void 0),__decorate([c(cc.Node)],t.prototype,"circle",void 0),__decorate([c(cc.Label)],t.prototype,"scoreLabel",void 0),t=o=__decorate([i],t)}(cc.Component);o.default=s,cc._RF.pop()},{"./Gun":"Gun","./Player":"Player"}],objective:[function(t,e,o){"use strict";cc._RF.push(e,"e7a13eyPIlLz7ILHOWoh6rL","objective"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./UIManager"),r=cc._decorator,a=r.ccclass,i=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.burst=null,t}return __extends(t,e),t.prototype.onDeath=function(){var t=this,e=cc.instantiate(this.burst);e.parent=n.default.instance.burstParent,e.position=n.default.instance.burstParent.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(cc.Vec2.ZERO)),e.getComponent(cc.ParticleSystem).startColor=this.node.color,this.node.opacity=0,setTimeout(function(){t.node&&t.node.destroy()},500)},__decorate([i(cc.Prefab)],t.prototype,"burst",void 0),t=__decorate([a],t)}(cc.Component);o.default=c,cc._RF.pop()},{"./UIManager":"UIManager"}]},{},["Bullet","Gun","Player","UIManager","objective"]);